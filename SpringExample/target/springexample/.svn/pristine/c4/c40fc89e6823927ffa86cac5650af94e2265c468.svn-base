<%@ page language="java" contentType="text/html; charset=GBK"  pageEncoding="GBK"%>
<%@ page import="
java.util.HashMap,
java.util.ArrayList,
java.util.Iterator,
com.sohu.frontweb.flow.data.Triple,
com.sohu.frontweb.flow.action.XmlAction,
com.sohu.frontweb.ParameterWrapper,
java.net.URLDecoder,
java.net.URLEncoder
"
%> 
<%

		ParameterWrapper pw = new ParameterWrapper();
		pw.init(request);
		
		String title = pw.getStringParameter("title","");
		String startDate = pw.getStringParameter("sdate","");
		String endDate = pw.getStringParameter("edate","");
		String table = pw.getStringParameter("table","");
		
		ArrayList<String> columnList = new ArrayList<String>();
		columnList.add("title");
		columnList.add("date");
		columnList.add("count");
		
		ArrayList<Triple> whereList = new ArrayList<Triple>();
		whereList.add(new Triple("title","=",title));
		whereList.add(new Triple("date",">",startDate));
		whereList.add(new Triple("date","<",endDate));
		//whereList.add(new Triple("title","=",title));
		
		String[] xmlArr = XmlAction.getZoomLine(table,columnList,whereList);

%>


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=GBK"/>
	
</head>   
<body>

<table border=0 width=100% align="center" style="font-size:14px;text-align:center;margin-top:20px;">
<tr>
</tr>
<tr>
		<td>
			<div id="zoomline_chartdiv"> </div>
		</td>
</tr>
</table>
<script type="text/javascript">
	var zoomLineXml = "<chart compactDataMode='1' dataSeparator='|' formatNumberScale='0' paletteThemeColor='5D57A5' divLineColor='5D57A5' divLineAlpha='40' vDivLineAlpha='40' dynamicAxis='1'>"+
				 "<categories>"+
				 "<%=xmlArr[0]%>"+
				 "</categories>"+
				 "<dataset seriesName='Series 1'>"+
				 "<%=xmlArr[1]%>"+
				 "</dataset>"+
				 "</chart>";
				 
				   var chart = new FusionCharts("flash/FUSIONCHARTS.COM/ZoomLine.swf", "ChartId", "100%", "400", "0", "0");
		   //chart.setXMLUrl("apollo/xml?chart=pvTrend");	
		   chart.setXMLData(zoomLineXml);
		   chart.render("zoomline_chartdiv");		 

</script>
</body>
</html>
